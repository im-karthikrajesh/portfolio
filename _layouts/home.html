<!doctype html>
<html lang="{{ site.lang | default: 'en' }}">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>{{ page.title | default: site.title }}</title>

  <!-- SEO + sitemap (requires jekyll-seo-tag in _config.yml) -->
  {% seo %}

  <!-- Styles -->
  <link rel="stylesheet" href="{{ '/assets/css/style.css' | relative_url }}">
  <link rel="icon" href="{{ site.logo | relative_url }}">

  <!-- Person schema -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Person",
    "name": "Karthik Rajesh",
    "url": "{{ site.url }}{{ site.baseurl }}",
    "email": "mailto:{{ site.author.email }}",
    "sameAs": ["{{ site.author.github }}", "{{ site.author.linkedin }}"]
  }
  </script>

  <!-- As a fallback, hide any theme header/footer that might slip through -->
  <style>
    .page-header, .project-name, .project-tagline, .site-header,
    header[role="banner"], header.page-header,
    footer.site-footer, footer[role="contentinfo"] { display:none !important; }
  </style>
</head>
<body>
  <div class="wrapper">
    <div class="shell"><!-- two-column grid -->

      <!-- Left rail: your hero (sticky) -->
      <aside class="left-rail">
        <div class="hero">
          <img class="headshot"
               src="{{ site.logo | relative_url }}"
               alt="Headshot of {{ site.title }}"
               width="120" height="120"
               decoding="async" fetchpriority="high" />
          <div class="hero-text">
            <h1>{{ site.title }}</h1>
            <p class="tagline">{{ site.description }}</p>
            <p class="links">
              <a href="{{ site.author.github }}" target="_blank" rel="noopener">GitHub</a>
              ¬∑ <a href="{{ site.author.linkedin }}" target="_blank" rel="noopener">LinkedIn</a>
              ¬∑ <a href="mailto:{{ site.author.email }}">Email</a>
            </p>
            <p class="open-to">
              Open to: <strong>SDE (ML)</strong>, <strong>ML Engineer</strong>,
              <strong>Data Scientist/Engineer</strong>, <strong>IT Business Analyst</strong>
            </p>
          </div>
        </div>
      </aside>

      <!-- Right column: nav + page content -->
      <main id="main-content" class="content">

        <!-- Section Nav (with theme toggle) -->
        <nav class="nav">
          <a href="#projects">Projects</a>
          <a href="#experience">Experience</a>
          <a href="#education">Education</a>
          <a href="#contact">Contact</a>

          <button id="theme-toggle" class="theme-toggle" type="button"
                  aria-live="polite" aria-label="Toggle dark or light theme">
            <span class="icon icon-sun" aria-hidden="true">‚òÄÔ∏è</span>
            <span class="icon icon-moon" aria-hidden="true">üåô</span>
            <span class="sr-only">Toggle theme</span>
          </button>
        </nav>

        <!-- Inject the page's markdown sections -->
        {{ content }}

        <hr class="footnote" />
        <p class="tiny">¬© {{ site.time | date: "%Y" }} {{ site.title }} ‚Ä¢ Built with GitHub Pages (Jekyll)</p>
      </main>
    </div>
  </div>

  <!-- Theme script: saved choice -> system preference fallback -->
  <script>
  (function () {
    const KEY = 'theme';
    const root = document.documentElement;
    const saved = localStorage.getItem(KEY);
    const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
    const initial = saved || (prefersDark ? 'dark' : 'light');
    root.setAttribute('data-theme', initial);

    window.addEventListener('DOMContentLoaded', function () {
      const btn = document.getElementById('theme-toggle');
      if (!btn) return;
      btn.addEventListener('click', function () {
        const current = root.getAttribute('data-theme') || (prefersDark ? 'dark' : 'light');
        const next = current === 'dark' ? 'light' : 'dark';
        root.setAttribute('data-theme', next);
        try { localStorage.setItem(KEY, next); } catch(e) {}
        btn.setAttribute('aria-label', next === 'dark' ? 'Switch to light theme' : 'Switch to dark theme');
      });
    }, { once: true });
  })();
  </script>
</body>
</html>
